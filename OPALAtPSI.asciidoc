= Using OPAL at PSI (and Merlin)

For using OPAL at PSI one can use the precompiled binaries that can be loaded with modules.

== Load precompiled binary with Modules

Load the OPAL tool-chain for OPAL 2.x
```
source /opt/psi/config/profile.bash
module use /afs/psi.ch/project/amas/modulefiles
module use unstable
module load gcc/7.3.0 openmpi/3.1.3 OPAL/2.0.2
```

and for 1.6.x
```
source /opt/psi/config/profile.bash
module use /afs/psi.ch/project/amas/modulefiles
module load opal-toolchain/1.6
module load OPAL/1.6.2
```

Now `opal` is available from the command line.

**Note**: For your convenience you might add these lines to your `.bashrc` or `.bash_profile`.

An environment variable OPAL_EXE_PATH might point to the directory where the selected version of OPAL will reside.

Some info on using https://intranet.psi.ch/PSI_HPC/Merlin5[Merlin5].

== Get OPAL source

The OPAL source can be cloned from https://gitlab.psi.ch/OPAL/src (`git@gitlab.psi.ch:OPAL/src.git`).

```
mkdir OPAL_repo
cd OPAL_repo
git clone git@gitlab.psi.ch:OPAL/src.git
```

To get a specific branch, for example OPAL/2.0, do:

```
cd src
git checkout OPAL-2.0
```

== Compile OPAL

For instructions on compiling OPAL see link:For%20Developers/Compile%20OPAL[Compile _OPAL_].